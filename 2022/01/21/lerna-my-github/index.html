<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.8.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta name="description" content="Learned React for long times. And have created many repositories. But, it is not an easy way to findout if long time to used them. So I made all related react repository into my best-practice-in-react">
<meta property="og:type" content="article">
<meta property="og:title" content="lerna my react related projects into monorepos">
<meta property="og:url" content="http://example.com/2022/01/21/lerna-my-github/index.html">
<meta property="og:site_name" content="Nate Liu&#39;s Blog">
<meta property="og:description" content="Learned React for long times. And have created many repositories. But, it is not an easy way to findout if long time to used them. So I made all related react repository into my best-practice-in-react">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-01-21T10:15:22.000Z">
<meta property="article:modified_time" content="2022-01-23T09:06:01.853Z">
<meta property="article:author" content="Nate Liu">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/2022/01/21/lerna-my-github/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/2022/01/21/lerna-my-github/","path":"2022/01/21/lerna-my-github/","title":"lerna my react related projects into monorepos"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>lerna my react related projects into monorepos | Nate Liu's Blog</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Nate Liu's Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Prerequisite"><span class="nav-number">1.</span> <span class="nav-text">1. Prerequisite</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Using-YARN-workspaces-with-Lerna"><span class="nav-number">2.</span> <span class="nav-text">2. Using YARN workspaces with Lerna</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Create-packages-under-in-packages-folder"><span class="nav-number">3.</span> <span class="nav-text">3. Create packages under in packages folder</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Elegant-commit"><span class="nav-number">4.</span> <span class="nav-text">4. Elegant commit</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#commitizen-amp-amp-cz-lerna-changelog"><span class="nav-number">4.1.</span> <span class="nav-text">. commitizen &amp;&amp; cz-lerna-changelog</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#commitlint-amp-amp-husky"><span class="nav-number">4.2.</span> <span class="nav-text">. commitlint &amp;&amp; husky</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#standardjs-amp-amp-lint-staged"><span class="nav-number">4.3.</span> <span class="nav-text">. standardjs &amp;&amp; lint-staged</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-npm-publish-locally%EF%BC%9AVerdaccio"><span class="nav-number">5.</span> <span class="nav-text">5. npm publish locally：Verdaccio</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Push-this-to-github"><span class="nav-number">6.</span> <span class="nav-text">5. Push this to github</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-Import-an-existed-repository-into-this-monorepo"><span class="nav-number">7.</span> <span class="nav-text">6. Import an existed repository into this monorepo</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Nate Liu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">19</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/nateliu" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;nateliu" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:jinliangliu@163.com" title="E-Mail → mailto:jinliangliu@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/21/lerna-my-github/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nate Liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nate Liu's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          lerna my react related projects into monorepos
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-01-21 10:15:22" itemprop="dateCreated datePublished" datetime="2022-01-21T10:15:22+00:00">2022-01-21</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-01-23 09:06:01" itemprop="dateModified" datetime="2022-01-23T09:06:01+00:00">2022-01-23</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>Learned React for long times. And have created many repositories. But, it is not an easy way to findout if long time to used them. So I made all related react repository into my <code>best-practice-in-react</code> monorepos.<br>Here is my steps for creating lerna monorepos.</p>
<h3 id="1-Prerequisite"><a href="#1-Prerequisite" class="headerlink" title="1. Prerequisite"></a>1. Prerequisite</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yarn global add lerna</span><br><span class="line">mkdir best-practice-in-react</span><br><span class="line"><span class="built_in">cd</span> best-practice-in-react</span><br><span class="line">lerna init</span><br><span class="line">touch README.md</span><br></pre></td></tr></table></figure>

<p>The repository looks like below.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">best-practice-in-react/</span><br><span class="line">  packages/</span><br><span class="line">  package.json</span><br><span class="line">  lerna.json</span><br><span class="line">  README.md</span><br></pre></td></tr></table></figure>

<p>For better performance, we will go with YARN. So how do we configure YARN with Lerna?<br>It’s pretty simple! We just need to add <code>&quot;npmClient&quot;: &quot;yarn&quot;</code> to <code>lerna.json</code></p>
<h3 id="2-Using-YARN-workspaces-with-Lerna"><a href="#2-Using-YARN-workspaces-with-Lerna" class="headerlink" title="2. Using YARN workspaces with Lerna"></a>2. Using YARN workspaces with Lerna</h3><p>add <code>&quot;useWorkspaces&quot;: true</code> to <code>lerna.json</code> and in <code>package.json</code>, we need to add </p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;workspaces&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;packages/*&quot;</span></span><br><span class="line">  ]</span><br></pre></td></tr></table></figure>
<p>Once this is done, we can run command below, it is means forcefully telling Lerna to link the packages. As of now, we do not have anything under it, but we can run it to check if this setup can bootstrap and work properly.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn install</span><br><span class="line">or</span><br><span class="line">lerna bootstrap</span><br></pre></td></tr></table></figure>
<p>Because we have added <code>workspaces</code> in <code>package.json</code>, both commands above are the same.</p>
<p><del>### 3. Installing create-react-app and create-react-library<br>We will use create-react-app &amp; create-react-library to create a base for our libraries and modules.</del></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn create react-library ui-components</span><br><span class="line">yarn create react-library common-utils</span><br><span class="line">yarn create react-app my-app</span><br></pre></td></tr></table></figure>
<p><del>I don’t know why create-library use react 16.13.1, so I changed</del></p>
<h3 id="3-Create-packages-under-in-packages-folder"><a href="#3-Create-packages-under-in-packages-folder" class="headerlink" title="3. Create packages under in packages folder"></a>3. Create packages under in packages folder</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn create react-app todo-app-js</span><br><span class="line">lerna run start --scope todo-app-js</span><br></pre></td></tr></table></figure>
<p>We can see the React website.</p>
<p>Next we add prefix <code>@best-practice-in-reace</code> in <code>todo-app-js</code> <code>package.json</code>.</p>
<figure class="highlight plaintext"><figcaption><span>package.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;name&quot;: &quot;@best-practice-in-react/todo-app-js</span><br></pre></td></tr></table></figure>
<p>Then run commands in terminate</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lerna clean</span><br><span class="line">lerna run start --scop @best-practice-in-react/todo-app-js</span><br></pre></td></tr></table></figure>

<p>For convience, make a script in the <code>package.json</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;clean&quot;: &quot;lerna clean&quot;,</span><br><span class="line">  &quot;bootstrap&quot;: &quot;lerna bootstrap&quot;,  </span><br><span class="line">  &quot;start:todo-app-js&quot;: &quot;lerna run start --scope @best-practice-in-react/todo-app-js&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>So, the command we can run in terminal as </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn clean</span><br><span class="line">yarn bootstrap</span><br><span class="line">yarn start:todo-app-js</span><br></pre></td></tr></table></figure>

<p>Next we create another <code>typescript</code> version todo app under in <code>packages</code> folder.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn create react-app todo-app-ts --template=typescript</span><br></pre></td></tr></table></figure>

<p>So far, both applications are created by <code>create-react-app</code>, next we can setup a react from zero.</p>
<h3 id="4-Elegant-commit"><a href="#4-Elegant-commit" class="headerlink" title="4. Elegant commit"></a>4. Elegant commit</h3><h4 id="commitizen-amp-amp-cz-lerna-changelog"><a href="#commitizen-amp-amp-cz-lerna-changelog" class="headerlink" title=". commitizen &amp;&amp; cz-lerna-changelog"></a>. commitizen &amp;&amp; cz-lerna-changelog</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn add commitizen -DW</span><br><span class="line">yarn add cz-lerna-changelog -DW</span><br></pre></td></tr></table></figure>
<p><code>commitizen</code> used for formatting <code>git commit message</code>. It providers a interactive to retrieve commit message.<br><code>cz-lerna-changelog</code> used for <code>Lerna</code> commit message specifically。</p>
<p>After install both pckages, we add <code>config</code> in root <code>package.json</code>. config <code>cz-lerna-changelog</code> to <code>commitizen</code>, mean time, we have to add scripts for <code>commitizen</code> because we save them in <code>devDenpendenies</code>. So we have to add <code>scripts</code> for excuting <code>git-cz</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">&quot;commit&quot;</span>: <span class="string">&quot;git-cz&quot;</span>,</span><br><span class="line">    ...</span><br><span class="line"> &#125;,</span><br><span class="line"><span class="string">&quot;config&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;commitizen&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;path&quot;</span>: <span class="string">&quot;./node_modules/cz-lerna-changelog&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<p>At this time,we can use </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn commit </span><br></pre></td></tr></table></figure>
<p>to commit message with elegent. </p>
<h4 id="commitlint-amp-amp-husky"><a href="#commitlint-amp-amp-husky" class="headerlink" title=". commitlint &amp;&amp; husky"></a>. commitlint &amp;&amp; husky</h4><p>We used <code>commitizen</code> above to standardize commits, but it’s up to the developer to use <code>yarn commit</code>. What if you forget, or commit directly with <code>git commit</code>? The answer is to check the commit information at commit time, and if it doesn’t meet the requirements, then you will not commit it and will be prompted. This is done by <code>commitlint</code>, and the timing is specified by <code>husky</code>. <code>husky</code> inherits all the hooks from Git, and when the hooks are triggered, husky can block illegal commits, pushes, and so on.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn add -DW @commitlint/cli @commitlint/config-conventional</span><br><span class="line">yarn add -DW husky</span><br></pre></td></tr></table></figure>
<p>Add husky config in root <code>package.json</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;husky&quot;</span>: &#123;</span><br><span class="line">  <span class="attr">&quot;hooks&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;commit-msg&quot;</span>: <span class="string">&quot;commitlint -E HUSKY_GIT_PARAMS&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>And add <code>commitlint.config.js</code> in root directory.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch commitlint.config.js</span><br></pre></td></tr></table></figure>
<p>with context:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123; <span class="attr">extends</span>: [<span class="string">&#x27;@commitlint/config-conventional&#x27;</span>] &#125;</span><br></pre></td></tr></table></figure>

<p><code>commit-msg</code> is a hook that checks the commit message when <code>git commit</code> is triggered, and will use <code>commitlit</code> to check it when triggered. If you want to commit via <code>git commit</code> or other third-party tools after installation and configuration, you will not be able to commit if the commit message does not match the specification. This constrains developers from using <code>yarn commit</code> for commits.</p>
<blockquote>
<p>We can use </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;build: change something&quot;</span> | yarn commitlint</span><br></pre></td></tr></table></figure>
<p>to Vverify that your commit message passes the commitlint check or not.</p>
</blockquote>
<h4 id="standardjs-amp-amp-lint-staged"><a href="#standardjs-amp-amp-lint-staged" class="headerlink" title=". standardjs &amp;&amp; lint-staged"></a>. standardjs &amp;&amp; lint-staged</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add -DW standard lint-staged</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;husky&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;hooks&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;pre-commit&quot;</span>: <span class="string">&quot;lint-staged&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;commit-msg&quot;</span>: <span class="string">&quot;commitlint -E HUSKY_GIT_PARAMS&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;lint-staged&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;*.js&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;standard --fix&quot;</span>,</span><br><span class="line">      <span class="string">&quot;git add&quot;</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>Add the <code>lint-staged</code> configuration to root <code>package.json</code>, as shown above, to perform <code>standard --fix</code> checksum on the js files in the staging area and repair them automatically. Then when to verify it, we use <code>husky</code> installed above again, husky’s configuration add <code>pre-commit</code> hook to perform <code>lint-staged</code> verification operation, as shown above.<br>At this time, when the js file is submitted, it will automatically correct and verify the errors. This ensures uniform code style and improves code quality.</p>
<h3 id="5-npm-publish-locally：Verdaccio"><a href="#5-npm-publish-locally：Verdaccio" class="headerlink" title="5. npm publish locally：Verdaccio"></a>5. npm publish locally：Verdaccio</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn global add verdaccio</span><br><span class="line">verdaccio</span><br><span class="line">touch .npmrc</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><figcaption><span>.npmrc content</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">registry=<span class="string">&quot;http://localhost:4873/&quot;</span></span><br></pre></td></tr></table></figure>
<p>It’s done! Whenever you run <code>lerna publish</code>, the package built from the child project will be published in the local npm repository, and when you run <code>lerna bootstrap</code>, <code>Verdaccio</code> will release it, allowing you to successfully pull the corresponding code from the remote npm repository.</p>
<h3 id="5-Push-this-to-github"><a href="#5-Push-this-to-github" class="headerlink" title="5. Push this to github"></a>5. Push this to github</h3><p>New a repostory in github.com, and run commands below.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin https://github.com/nateliu/best-practice-in-react.git</span><br><span class="line">git branch -M main</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&#x27;Initialize best-practice-in-react&#x27;</span></span><br><span class="line">git push -u origin main</span><br></pre></td></tr></table></figure>

<h3 id="6-Import-an-existed-repository-into-this-monorepo"><a href="#6-Import-an-existed-repository-into-this-monorepo" class="headerlink" title="6. Import an existed repository into this monorepo"></a>6. Import an existed repository into this monorepo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lerna import ../react-best-practice</span><br><span class="line">lerna import ../react-component-library</span><br><span class="line">lerna import ../webpack-react-startkit</span><br><span class="line">lerna import ../webpack-redux-startkit</span><br><span class="line">lerna import ../react-redux-startkit</span><br></pre></td></tr></table></figure>




    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/01/15/react-best-practice-react-source/" rel="prev" title="react best practice (3)-- learning source code">
                  <i class="fa fa-chevron-left"></i> react best practice (3)-- learning source code
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nate Liu</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
